{% extends 'main_pages/base.html' %} {% load static %} {% block content %}


  <div class="main-content">
    <!-- Navbar -->
    <nav class="navbar navbar-top navbar-expand-md navbar-dark" id="navbar-main">
      <div class="container-fluid">
        <!-- Brand -->
        <a
          class="h4 mb-0 text-white text-uppercase d-none d-lg-inline-block"
          href="{% url 'vendor_app:dashboard' %}"
          >  Dashboard</a
        >

        {% comment %} <div class="navbar-search navbar-search-dark form-inline mr-3 d-none d-md-flex ">
          <div class="input-group input-group-alternative">
            <div class="input-group-prepend">
              <a href="" type="button" data-toggle="modal" data-target="#modal-form-search">
              <span class="input-group-text"><i class="fas fa-search"></i></span>
            </a>
            </div>
        </div> {% endcomment %}
    
        
        <!-- Form -->
        {% comment %} <div class="navbar-search navbar-search-dark form-inline mr-3 d-none d-md-flex ml-lg-auto">
          {% csrf_token %}
          <div class="form-group mb-0">
            <div class="input-group input-group-alternative">
              <div class="input-group-prepend">
                <span class="input-group-text"
                  ><i class="fas fa-search"></i
                ></span>
              </div>
              <input class="form-control" placeholder="Search" type="number" name="search_no"/>
            </div>
          </div>
        </div> {% endcomment %}
        <!-- User -->
        <ul class="navbar-nav align-items-center d-none d-md-flex">
          <li class="nav-item dropdown">
            <a class="nav-link pr-0"
              href="#"
              role="button"
              data-toggle="dropdown"
              aria-haspopup="true"
              aria-expanded="false">
              <div class="media align-items-center">
                <span class="avatar avatar-sm rounded-circle">
                  <img
                    alt="profile"
                    {% comment %} src="{% static 'img/theme/team-4-800x800.jpg' %}" {% endcomment %}
                  />
                </span>
                <div class="media-body ml-2 d-none d-lg-block">
                  <span class="mb-0 text-sm font-weight-bold">
                    {{ request.session.vusername }}
                  </span>
                </div>
              </div>
            </a>
            <div class="dropdown-menu dropdown-menu-arrow dropdown-menu-right">
              <div class="dropdown-header noti-title">
                <h6 class="text-overflow m-0">Welcome!</h6>
              </div>
              <a href="#" class="dropdown-item">
                <i class="ni ni-single-02"></i>
                <span>My profile</span>
              </a>
              <a href="" class="dropdown-item">
                <i class="ni ni-settings-gear-65"></i>
                <span>Settings</span>
              </a>
             
             
              <div class="dropdown-divider"></div>
              <a href="" class="dropdown-item" data-toggle="modal" data-target="#exampleModal">
                <i class="ni ni-user-run"></i>
                <span>Logout</span>
              </a>
            </div>
          </li>
        </ul>
      </div>
    </nav>

    <div class="modal fade" id="modal-form-search" tabindex="-1" role="dialog" aria-labelledby="labelsenior" aria-hidden="true">
      <div class="modal-dialog modal- modal-dialog-centered modal-sm" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="labelsenior">Search Customer via mobile number</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
            
          </div>
          <div class="modal-body p-0">
            <div class="card bg-secondary border-0 mb-0 m-2">
              <div class="card-body px-lg-5 py-lg-5">
                <div class="text-center text-muted mb-4">
                    <small>Use Valid Mobile Number</small>
                </div>
                <form role="form" method="post" action="">
                  {% csrf_token %}
                    <div class="form-group mb-3">
                        <div class="input-group input-group-merge input-group-alternative">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i class="fa-solid fa-phone"></i></span>
                            </div>
                            <input class="form-control" placeholder="Mobile Number" type="number" name="search_no">
                        </div>
                    </div>
                    
                   
                    <div class="text-center">
                        <button type="submit" class="btn btn-primary my-4">Search</button>
                    </div>
                </form>
                
              {% if data %}
                <div class="modal-footer">
                  <div class="alert alert-success alert-dismissible fade show" role="alert">
                    <span class="alert-icon"><i class="ni ni-like-2"></i></span>
                    <span class="alert-text"><strong>Success!</strong> This is a success alert—check it out!</span>
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
              </div>
              {% elif error_code %}
              <div class="alert alert-danger alert-dismissible fade show" role="alert">
                <span class="alert-icon"><i class="ni ni-like-2"></i></span>
                <span class="alert-text"><strong>Danger!</strong> This is a danger alert—check it out!</span>
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>            
              {% endif %}

            </div>
            </div>
          </div>
          
        </div>
      </div>
    </div>


    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Are you sure you want to Log Out</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>
              <form method="post" action="">
                {% csrf_token %}
              <button type="submit" class="btn btn-primary">Yes</button>
              </form>
            </div>
          </div>
        </div>
      </div>
    <!-- End Navbar -->
    <!-- Header -->
    <div class="header bg-gradient-green pb-8 pt-5 pt-md-8">
      <div class="container-fluid">
        <div class="header-body">
          <!-- Card stats -->
          <div class="row">
            <div class="col-xl-3 col-lg-6">
              <div class="card card-stats mb-4 mb-xl-0">
                <div class="card-body">
                  <div class="row">
                    <div class="col">
                      <h5 class="card-title text-uppercase text-muted mb-0">
                        Total Orders Delivered
                      </h5>
                      <span class="h2 font-weight-bold mb-0">0</span>
                    </div>
                    <div class="col-auto">
                      <div
                        class="icon icon-shape bg-danger text-white rounded-circle shadow"
                      >
                      <i class="fa-solid fa-tent-arrows-down"></i>
                      </div>
                    </div>
                  </div>
                  <p class="mt-3 mb-0 text-muted text-sm">
                    <span class="text-success mr-2"
                      ><i class="fa fa-arrow-up"></i> 0.0%</span
                    >
                    <span class="text-nowrap">Since last month</span>
                  </p>
                </div>
              </div>
            </div>
            <div class="col-xl-3 col-lg-6">
              <div class="card card-stats mb-4 mb-xl-0">
                <div class="card-body">
                  <div class="row">
                    <div class="col">
                      <h5 class="card-title text-uppercase text-muted mb-0">
                        Active Orders Today
                      </h5>
                      <span class="h2 font-weight-bold mb-0">0</span>
                    </div>
                    <div class="col-auto">
                      <div
                        class="icon icon-shape bg-warning text-white rounded-circle shadow"
                      >
                        <i class="fa-solid fa-handshake-angle"></i>
                      </div>
                    </div>
                  </div>
                  <p class="mt-3 mb-0 text-muted text-sm">
                    <span class="text-danger mr-2"
                      ><i class="fas fa-arrow-down"></i> 0.0%</span
                    >
                    <span class="text-nowrap">Since last week</span>
                  </p>
                </div>
              </div>
            </div>
            <div class="col-xl-3 col-lg-6">
              <div class="card card-stats mb-4 mb-xl-0">
                <div class="card-body">
                  <div class="row">
                    <div class="col">
                      <h5 class="card-title text-uppercase text-muted mb-0">
                        Requests Handled Today
                      </h5>
                      <span class="h2 font-weight-bold mb-0">0</span>
                    </div>
                    <div class="col-auto">
                      <div
                        class="icon icon-shape bg-yellow text-white rounded-circle shadow"
                      >
                        <i class="fa-solid fa-phone-volume"></i>
                      </div>
                    </div>
                  </div>
                  <p class="mt-3 mb-0 text-muted text-sm">
                    <span class="text-warning mr-2"
                      ><i class="fas fa-arrow-down"></i> 0.0%</span
                    >
                    <span class="text-nowrap">Since yesterday</span>
                  </p>
                </div>
              </div>
            </div>
            <div class="col-xl-3 col-lg-6">
              <div class="card card-stats mb-4 mb-xl-0">
                <div class="card-body">
                  <div class="row">
                    <div class="col">
                      <h5 class="card-title text-uppercase text-muted mb-0">
                        Satisfaction Rate | Performance
                      </h5>
                      <span class="h2 font-weight-bold mb-0">0.0%</span>
                    </div>
                    <div class="col-auto">
                      <div
                        class="icon icon-shape bg-info text-white rounded-circle shadow"
                      >
                        <i class="fa-regular fa-thumbs-up"></i>
                      </div>
                    </div>
                  </div>
                  <p class="mt-3 mb-0 text-muted text-sm">
                    <span class="text-success mr-2"
                      ><i class="fas fa-arrow-up"></i> 0%</span
                    >
                    <span class="text-nowrap">Since last month</span>
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    {% if result %}
    $(document).ready(function() {
        $('#resultModal').modal('show');
    });
    {% endif %}
</script>
<script>
  $(document).ready(function() {
    $('#searchForm').submit(function(e) {
      e.preventDefault();
      var searchNumber = $('#mobileNumber').val();

      $.ajax({
        type: 'POST',
        url: '/search_citizen/',  // Update this with the correct URL
        data: {
          'search_no': searchNumber,
          'csrfmiddlewaretoken': $('input[name=csrfmiddlewaretoken]').val()
        },
        success: function(data) {
          // Display appropriate alert based on the response
          if (data.exists) {
            alert('User with the provided mobile number exists.');
          } else {
            alert('User with the provided mobile number does not exist.');
          }
        },
        error: function(xhr, errmsg, err) {
          alert('Error: ' + errmsg);
        }
      });
    });
  });
</script>

{% endblock %}
